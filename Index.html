<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aviator Pro | Controlled Edition</title>
    <style>
        :root { --red: #d61f27; --bg: #000; --panel: #1b1c20; --green: #28a745; --orange: #d97d00; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: white; margin: 0; overflow: hidden; }
        
        /* Top Bar */
        .top-bar { display: flex; justify-content: space-between; align-items: center; padding: 10px 15px; background: #141516; border-bottom: 1px solid #333; }
        .balance { background: #000; padding: 5px 15px; border-radius: 20px; border: 1px solid var(--green); cursor: pointer; }

        /* Game Stage */
        .stage { height: 350px; position: relative; background: radial-gradient(circle at bottom left, #230809 0%, #000 70%); display: flex; justify-content: center; align-items: center; overflow: hidden; }
        .multiplier { font-size: 5rem; font-weight: 900; z-index: 10; font-family: 'Courier New', monospace; }
        .plane { position: absolute; bottom: 15%; left: 10%; width: 100px; z-index: 5; transition: transform 0.1s linear; }
        .flew-away { position: absolute; top: 15%; color: var(--red); font-size: 1.8rem; font-weight: bold; display: none; }

        /* Controls */
        .bet-interface { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 15px; background: #141516; height: 180px; }
        .bet-card { background: var(--panel); border-radius: 15px; padding: 15px; border: 1px solid #333; text-align: center; }
        .btn-main { width: 100%; height: 60px; border-radius: 12px; border: none; font-weight: 900; font-size: 1.3rem; cursor: pointer; color: white; margin-top: 10px; }
        .btn-bet { background: var(--green); }
        .btn-out { background: var(--orange); }

        /* Hidden Admin Panel */
        #adminPanel { position: fixed; top: 60px; right: 10px; background: #222; padding: 15px; border-radius: 10px; border: 1px solid var(--red); display: none; z-index: 100; }
        .admin-btn { background: #444; color: white; border: 1px solid #666; padding: 5px; margin: 5px; cursor: pointer; font-size: 0.8rem; }
    </style>
</head>
<body>

<div class="top-bar">
    <div style="font-weight: 800; font-size: 1.2rem;">AVIATOR</div>
    <div class="balance" onclick="toggleAdmin()">KES <span id="userBal">1500.00</span></div>
</div>

<div id="adminPanel">
    <div style="font-size: 0.7rem; color: var(--red); margin-bottom: 5px;">WAVE CONTROL</div>
    <button class="admin-btn" onclick="setNext(1.00)">Force Crash (1.00x)</button>
    <button class="admin-btn" onclick="setNext(2.50)">Medium (2.50x)</button>
    <button class="admin-btn" onclick="setNext(15.00)">Big Win (15x)</button>
</div>

<div class="stage">
    <div id="flewTxt" class="flew-away">FLEW AWAY!</div>
    <div id="multVal" class="multiplier">1.00x</div>
    <img src="https://i.ibb.co/L8N7hYy/plane.png" id="planeObj" class="plane">
</div>

<div class="bet-interface">
    <div class="bet-card">
        <input type="number" value="100" style="width: 80%; padding: 5px; background: #000; color: #fff; border: 1px solid #444;">
        <button id="btn1" class="btn-main btn-bet" onclick="handleAction(1)">BET</button>
    </div>
    <div class="bet-card">
        <input type="number" value="100" style="width: 80%; padding: 5px; background: #000; color: #fff; border: 1px solid #444;">
        <button id="btn2" class="btn-main btn-bet" onclick="handleAction(2)">BET</button>
    </div>
</div>

<script>
    let balance = 1500.00;
    let mult = 1.00;
    let crash = 0;
    let flying = false;
    let nextCrashOverride = null;
    let activeBets = { 1: false, 2: false };
    let interval;

    function startRound() {
        flying = true;
        mult = 1.00;
        document.getElementById('flewTxt').style.display = 'none';
        document.getElementById('multVal').style.color = 'white';
        
        // Control Logic: Check if Admin set a value, else Random
        crash = nextCrashOverride ? nextCrashOverride : (Math.random() * 3 + 1.1).toFixed(2);
        nextCrashOverride = null; // Reset override after use

        interval = setInterval(() => {
            if (mult >= crash) {
                endRound();
            } else {
                mult += 0.01;
                document.getElementById('multVal').innerText = mult.toFixed(2) + "x";
                
                // Flight Path Curve
                let x = (mult - 1) * 45;
                let y = (mult - 1) * 25;
                document.getElementById('planeObj').style.transform = `translate(${x}px, -${y}px)`;
                
                updateUI();
            }
        }, 60);
    }

    function endRound() {
        clearInterval(interval);
        flying = false;
        document.getElementById('flewTxt').style.display = 'block';
        document.getElementById('multVal').style.color = 'var(--red)';
        
        // Deduct losses if didn't cash out
        [1, 2].forEach(i => { if(activeBets[i]) { balance -= 100; resetButton(i); } });
        
        document.getElementById('userBal').innerText = balance.toFixed(2);
        setTimeout(startRound, 4000);
    }

    function handleAction(num) {
        if (!flying) {
            activeBets[num] = true;
            document.getElementById('btn' + num).innerText = "WAITING...";
        } else if (activeBets[num]) {
            // Cashout logic
            let profit = 100 * mult;
            balance += (profit - 100);
            document.getElementById('userBal').innerText = balance.toFixed(2);
            activeBets[num] = false;
            resetButton(num);
        }
    }

    function updateUI() {
        [1, 2].forEach(i => {
            if(activeBets[i] && flying) {
                const btn = document.getElementById('btn' + i);
                btn.className = "btn-main btn-out";
                btn.innerHTML = `CASH OUT<br><span style="font-size:0.8rem">KES ${(100*mult).toFixed(2)}</span>`;
            }
        });
    }

    function resetButton(num) {
        const btn = document.getElementById('btn' + num);
        btn.className = "btn-main btn-bet";
        btn.innerText = "BET";
    }

    // Admin Controls
    function toggleAdmin() {
        const p = document.getElementById('adminPanel');
        p.style.display = p.style.display === 'block' ? 'none' : 'block';
    }
    function setNext(val) {
        nextCrashOverride = val;
        alert("Next Wave Set to: " + val + "x");
    }

    startRound();
</script>
</body>
</html>

